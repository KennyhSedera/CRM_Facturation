import{r as i,j as e}from"./app-DuD114R4.js";import{H as k}from"./head-DFfEN7np.js";import{A as w,C as _}from"./app-layout-y0NRPRtw.js";import{c as x}from"./createLucideIcon-DzR-URp3.js";import{S as C,E as S}from"./search-BkN1PrzY.js";import{M as A,P as L}from"./phone-DdjbTk1z.js";import{M as P}from"./map-pin-CEUEYlLI.js";import{S as E}from"./square-pen-yj-CI_eJ.js";/* empty css            */import"./button-BLuqnXSI.js";import"./index-CHzUSVmf.js";import"./index-DXQpgyCZ.js";import"./x-lMrIxNoe.js";import"./users-KwCeqX8q.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],$=x("ChevronLeft",M);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],T=x("Filter",I);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],V=x("Plus",F);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],R=x("Trash2",H),q=[{title:"Clients",href:"/clients"}],re=()=>{const[o,u]=i.useState(""),[g,y]=i.useState("all"),[n,c]=i.useState([]),[s,p]=i.useState({current_page:1,last_page:1,per_page:15,total:0,from:0,to:0}),[z,d]=i.useState(!1);i.useEffect(()=>{(async()=>{d(!0);try{const l=await(await fetch("/api/clients")).json();if(l.success&&l.data){const a=l.data;c(a.data),p({current_page:a.current_page,last_page:a.last_page,per_page:a.per_page,total:a.total,from:a.from,to:a.to})}else console.error("Erreur API:",l.message),c([])}catch(r){console.error("Erreur lors du chargement:",r),c([])}finally{d(!1)}})()},[]);const h=Array.isArray(n)?n.filter(t=>{const r=t.client_name.toLowerCase().includes(o.toLowerCase())||t.client_email.toLowerCase().includes(o.toLowerCase())||t.client_reference.toLowerCase().includes(o.toLowerCase()),l=g==="all"||t.client_status===g;return r&&l}):[],b=t=>({active:"bg-green-100 text-green-700 border-green-200",inactive:"bg-gray-100 text-gray-700 border-gray-200",pending:"bg-yellow-100 text-yellow-700 border-yellow-200"})[t],f=t=>({active:"Actif",inactive:"Inactif",pending:"En attente"})[t],j=Array.isArray(n)?n.filter(t=>t.client_status==="active").length:0,v=Array.isArray(n)?n.filter(t=>t.client_note?.toLowerCase().includes("vip")).length:0,m=async t=>{d(!0);try{const l=await(await fetch(`/api/clients?page=${t}`)).json();if(l.success&&l.data){const a=l.data;c(a.data),p({current_page:a.current_page,last_page:a.last_page,per_page:a.per_page,total:a.total,from:a.from,to:a.to})}else console.error("Erreur API:",l.message),c([])}catch(r){console.error("Erreur lors du changement de page:",r),c([])}finally{d(!1)}},N=[{label:"Total Clients",value:s.total,trend:"↑ 12% ce mois",trendColor:"text-green-600"},{label:"Clients Actifs",value:j},{label:"Clients VIP",value:v},{label:"Nouveaux Clients (30j)",value:n.length}];return e.jsxs(w,{breadcrumbs:q,children:[e.jsx(k,{title:"Clients"}),e.jsxs("div",{className:"min-h-screen rounded-2xl bg-gray-50 p-6 dark:bg-white/15 dark:text-white",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Clients"}),e.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-300",children:"Gérez vos clients et leurs informations"})]}),e.jsxs("button",{className:"flex cursor-pointer items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-white transition-colors hover:bg-blue-700",children:[e.jsx(V,{className:"h-4 w-4"}),"Nouveau Client"]})]})}),e.jsx("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-4",children:N.map((t,r)=>e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-4 dark:border-gray-500 dark:bg-black",children:[e.jsx("div",{className:"mb-1 text-sm text-gray-600 dark:text-gray-300",children:t.label}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-200",children:t.value}),t.trend&&e.jsx("div",{className:`mt-1 text-xs ${t.trendColor}`,children:t.trend})]},r))}),e.jsx("div",{className:"mb-6 rounded-lg border border-gray-200 bg-white dark:border-gray-500 dark:bg-black",children:e.jsxs("div",{className:"flex flex-col gap-4 p-4 sm:flex-row",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(C,{className:"absolute top-1/2 left-3 h-5 w-5 -translate-y-1/2 transform text-gray-400"}),e.jsx("input",{type:"search",placeholder:"Rechercher par nom, email ou référence...",className:"w-full rounded-lg border border-gray-300 py-2 pr-4 pl-10 outline-none focus:border-transparent focus:ring-2 focus:ring-blue-500 dark:border-gray-500",value:o,onChange:t=>u(t.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"cursor-pointer rounded-lg border border-gray-300 px-4 py-2 outline-none focus:border-transparent focus:ring-2 focus:ring-blue-500 dark:border-gray-500",value:g,onChange:t=>y(t.target.value),children:[e.jsx("option",{className:"dark:bg-black",value:"all",children:"Tous les statuts"}),e.jsx("option",{className:"dark:bg-black",value:"active",children:"Actif"}),e.jsx("option",{className:"dark:bg-black",value:"inactive",children:"Inactif"}),e.jsx("option",{className:"dark:bg-black",value:"pending",children:"En attente"})]}),e.jsxs("button",{className:"flex items-center gap-2 rounded-lg border border-gray-300 px-4 py-2 hover:bg-gray-50 dark:border-gray-500 dark:bg-black dark:hover:bg-gray-900",children:[e.jsx(T,{className:"h-4 w-4"}),"Filtres"]})]})]})}),e.jsxs("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white dark:border-gray-500 dark:bg-black",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b border-gray-200 bg-gray-50 dark:border-gray-500 dark:bg-black",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-10 py-3 text-left text-xs font-medium tracking-wider text-gray-600 uppercase dark:text-gray-300",children:"Client"}),e.jsx("th",{className:"px-10 py-3 text-left text-xs font-medium tracking-wider text-gray-600 uppercase dark:text-gray-300",children:"Contact"}),e.jsx("th",{className:"px-10 py-3 text-left text-xs font-medium tracking-wider text-gray-600 uppercase dark:text-gray-300",children:"Localisation"}),e.jsx("th",{className:"px-10 py-3 text-left text-xs font-medium tracking-wider text-gray-600 uppercase dark:text-gray-300",children:"Statut"}),e.jsx("th",{className:"px-10 py-3 text-right text-xs font-medium tracking-wider text-gray-600 uppercase dark:text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-950",children:h.length>0?h.map(t=>e.jsxs("tr",{className:"transition-colors hover:bg-gray-50 dark:hover:bg-white/15",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-3 flex h-10 w-10 items-center justify-center rounded-full bg-blue-100 font-semibold text-blue-600",children:t.client_name.split(" ").map(r=>r[0]).join("").toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-200",children:t.client_name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-300",children:t.client_reference})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-200",children:[e.jsx(A,{className:"mr-2 h-4 w-4 text-gray-400"}),t.client_email]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(L,{className:"mr-2 h-4 w-4 text-gray-400"}),t.client_phone]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-start text-sm text-gray-600 dark:text-gray-200",children:[e.jsx(P,{className:"mt-0.5 mr-2 h-4 w-4 flex-shrink-0 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{children:t.client_adress}),t.client_city&&e.jsxs("div",{className:"text-gray-500 dark:text-gray-300",children:[t.client_city,", "]}),e.jsx("div",{className:"text-gray-500 dark:text-gray-300",children:t.client_country})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium ${b(t.client_status)}`,children:f(t.client_status)})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{className:"rounded-lg p-2 text-gray-600 transition-colors hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-white/20",title:"Voir",children:e.jsx(S,{className:"h-4 w-4"})}),e.jsx("button",{className:"rounded-lg p-2 text-blue-600 transition-colors hover:bg-blue-50",title:"Modifier",children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx("button",{className:"rounded-lg p-2 text-red-600 transition-colors hover:bg-red-50",title:"Supprimer",children:e.jsx(R,{className:"h-4 w-4"})})]})})]},t.client_id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500 dark:text-gray-300",children:"Aucun client trouvé"})})})]})}),e.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 border-t border-gray-200 px-6 py-4 sm:flex-row dark:border-gray-500",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Affichage de ",e.jsx("span",{className:"font-medium",children:s.from})," à ",e.jsx("span",{className:"font-medium",children:s.to})," ","sur ",e.jsx("span",{className:"font-medium",children:s.total})," résultat(s)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"flex cursor-pointer items-center gap-1 rounded-lg border border-gray-300 px-3 py-2 text-sm hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50 dark:hover:bg-slate-900",disabled:s.current_page===1,onClick:()=>m(s.current_page-1),children:[e.jsx($,{className:"h-4 w-4"}),"Précédent"]}),e.jsx("div",{className:"flex gap-1",children:[...Array(s.last_page)].map((t,r)=>e.jsx("button",{className:`rounded-lg px-3 py-2 text-sm ${s.current_page===r+1?"bg-blue-600 text-white":"cursor-pointer border border-gray-300 hover:bg-gray-50 dark:hover:bg-slate-900"}`,onClick:()=>m(r+1),children:r+1},r+1))}),e.jsxs("button",{className:"flex cursor-pointer items-center gap-1 rounded-lg border border-gray-300 px-3 py-2 text-sm hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50 dark:hover:bg-slate-900",disabled:s.current_page===s.last_page,onClick:()=>m(s.current_page+1),children:["Suivant",e.jsx(_,{className:"h-4 w-4"})]})]})]})]})]})]})};export{re as default};
