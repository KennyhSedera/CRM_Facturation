import{r as l,j as r,H as N}from"./app-D37ieNLE.js";import{a as C}from"./utils-EVyv9-g_.js";/* empty css            */function E({telegram_id:f}){const[a,y]=l.useState({company_name:"",company_email:"",company_description:"",company_phone:"",company_website:"",company_address:"Togo",plan_status:"free",plan_start_date:new Date().toISOString().split("T")[0],plan_end_date:C(new Date().toISOString().split("T")[0])}),[n,u]=l.useState({}),[d,m]=l.useState(!1),[t,b]=l.useState(null),[_,h]=l.useState(!1),x=l.useRef(a);l.useEffect(()=>{x.current=a},[a]),l.useEffect(()=>{const e=window.Telegram?.WebApp;if(e){b(e),e.ready(),e.expand(),e.enableClosingConfirmation(),document.body.style.backgroundColor=e.themeParams?.bg_color||"#ffffff",document.body.style.color=e.themeParams?.text_color||"#000000",e.MainButton.setText("‚úÖ Cr√©er l'entreprise"),e.MainButton.color=e.themeParams?.button_color||"#3390ec",e.MainButton.textColor=e.themeParams?.button_text_color||"#ffffff",e.MainButton.show();const s=()=>{j(e)};return e.MainButton.onClick(s),setTimeout(()=>{h(!0)},1e3),()=>{e.MainButton.offClick(s),e.MainButton.hide()}}else h(!0)},[]);const p=e=>{const{name:s,value:i}=e.target;y(o=>({...o,[s]:i})),n[s]&&u(o=>({...o,[s]:void 0}))},g=e=>{const s={};e.company_name.trim()?e.company_name.trim().length<2&&(s.company_name="Le nom doit contenir au moins 2 caract√®res"):s.company_name="Le nom de l'entreprise est requis";const i=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.company_email.trim()?i.test(e.company_email)||(s.company_email="L'email doit √™tre valide"):s.company_email="L'email est requis",e.company_description.trim()?e.company_description.trim().length<10&&(s.company_description="La description doit contenir au moins 10 caract√®res"):s.company_description="La description est requise",e.company_phone.trim()?e.company_phone.trim().length<8&&(s.company_phone="Le t√©l√©phone doit contenir au moins 8 caract√®res"):s.company_phone="Le t√©l√©phone est requis",s},j=e=>{const s=x.current,i=g(s);if(Object.keys(i).length>0){u(i),e?e.showAlert("‚ö†Ô∏è Veuillez corriger les erreurs dans le formulaire"):alert("‚ö†Ô∏è Veuillez corriger les erreurs dans le formulaire");return}m(!0),e?.MainButton.showProgress();try{s.plan_status="free";const o=JSON.stringify(s);if(e){const v=`/api/telegram/company/create/${e.initDataUnsafe?.user?.id||f}`;fetch(v,{method:"POST",headers:{"Content-Type":"application/json"},body:o}).then(c=>c.json()).then(c=>{c.success?(e.showAlert("‚úÖ Entreprise cr√©√©e!: "),alert("‚úÖ Entreprise cr√©√©e!: ")):(e.showAlert("‚ùå Une erreur est survenue: "+(c.message||"Erreur inconnue")),alert("‚ùå Une erreur est survenue: "+(c.message||"Erreur inconnue"))),m(!1)}).catch(c=>{e.showAlert("‚ùå Une erreur est survenue: "+c),e.MainButton.hideProgress(),m(!1)}),setTimeout(()=>{e.close()},2e3)}else alert(`‚úÖ Entreprise cr√©√©e! (Mode test)

Donn√©es: `+o),m(!1)}catch(o){e?(e.showAlert("‚ùå Une erreur est survenue: "+o),e.MainButton.hideProgress()):alert("‚ùå Une erreur est survenue: "+o),m(!1)}};return r.jsxs(r.Fragment,{children:[r.jsx(N,{title:"Cr√©er mon entreprise"}),r.jsx("div",{className:"min-h-screen p-4",style:{backgroundColor:t?.themeParams?.bg_color||"#ffffff",color:t?.themeParams?.text_color||"#000000"},children:r.jsxs("div",{className:"mx-auto max-w-2xl",children:[r.jsxs("div",{className:"mb-6 text-center",children:[r.jsx("h1",{className:"mb-2 text-3xl font-bold",children:"üè¢ Cr√©er mon entreprise"}),r.jsx("p",{className:"opacity-70",children:"Remplissez les informations de votre entreprise"})]}),r.jsxs("div",{className:"space-y-5",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"company_name",className:"mb-2 block text-sm font-semibold",children:["Nom de l'entreprise ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"company_name",name:"company_name",value:a.company_name,onChange:p,placeholder:"Ex: TechSolutions Madagascar",className:`w-full rounded-xl border-2 px-4 py-3 transition-all ${n.company_name?"border-red-500 bg-red-50":"border-gray-200 focus:border-blue-500"}`,style:{backgroundColor:t?.themeParams?.secondary_bg_color||"#f5f5f5",color:t?.themeParams?.text_color||"#000000"},disabled:d}),n.company_name&&r.jsxs("p",{className:"mt-1 flex items-center gap-1 text-sm text-red-500",children:[r.jsx("span",{children:"‚ö†Ô∏è"})," ",n.company_name]})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"company_email",className:"mb-2 block text-sm font-semibold",children:["Email professionnel ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",id:"company_email",name:"company_email",value:a.company_email,onChange:p,placeholder:"contact@techsolutions.mg",className:`w-full rounded-xl border-2 px-4 py-3 transition-all ${n.company_email?"border-red-500 bg-red-50":"border-gray-200 focus:border-blue-500"}`,style:{backgroundColor:t?.themeParams?.secondary_bg_color||"#f5f5f5",color:t?.themeParams?.text_color||"#000000"},disabled:d}),n.company_email&&r.jsxs("p",{className:"mt-1 flex items-center gap-1 text-sm text-red-500",children:[r.jsx("span",{children:"‚ö†Ô∏è"})," ",n.company_email]})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"company_phone",className:"mb-2 block text-sm font-semibold",children:["T√©l√©phone ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"tel",id:"company_phone",name:"company_phone",value:a.company_phone,onChange:p,placeholder:"Ex: +261 34 12 345 67",className:`w-full rounded-xl border-2 px-4 py-3 transition-all ${n.company_phone?"border-red-500 bg-red-50":"border-gray-200 focus:border-blue-500"}`,style:{backgroundColor:t?.themeParams?.secondary_bg_color||"#f5f5f5",color:t?.themeParams?.text_color||"#000000"},disabled:d}),n.company_phone&&r.jsxs("p",{className:"mt-1 flex items-center gap-1 text-sm text-red-500",children:[r.jsx("span",{children:"‚ö†Ô∏è"})," ",n.company_phone]})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"company_description",className:"mb-2 block text-sm font-semibold",children:["Description de l'activit√© ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{id:"company_description",name:"company_description",value:a.company_description,onChange:p,placeholder:"D√©crivez votre activit√© principale...",rows:4,maxLength:500,className:`w-full resize-y rounded-xl border-2 px-4 py-3 transition-all ${n.company_description?"border-red-500 bg-red-50":"border-gray-200 focus:border-blue-500"}`,style:{backgroundColor:t?.themeParams?.secondary_bg_color||"#f5f5f5",color:t?.themeParams?.text_color||"#000000"},disabled:d}),n.company_description&&r.jsxs("p",{className:"mt-1 flex items-center gap-1 text-sm text-red-500",children:[r.jsx("span",{children:"‚ö†Ô∏è"})," ",n.company_description]}),r.jsxs("p",{className:"mt-1 text-xs opacity-60",children:[a.company_description.length," / 500 caract√®res"]})]})]}),r.jsx("div",{className:"mt-8 rounded-xl border-2 border-blue-200 bg-blue-50 p-4",children:r.jsxs("p",{className:"flex items-start gap-2 text-sm text-blue-800",children:[r.jsx("span",{className:"text-lg",children:"‚ÑπÔ∏è"}),r.jsx("span",{children:_?"Cliquez sur le bouton ci-dessus pour cr√©er votre entreprise":"Cliquez sur le bouton en bas de l'√©cran pour cr√©er votre entreprise"})]})})]})})]})}export{E as default};
