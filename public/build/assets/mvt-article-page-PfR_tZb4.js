import{r as l,j as e}from"./app-BWYOhiDa.js";import{H as _}from"./head-C2661RtR.js";import{P as u,A as S,C as L}from"./app-layout-Bbh4AQ_w.js";import{c as h}from"./createLucideIcon-Ch_6YSE8.js";import{S as D}from"./search-DE1hpw9z.js";import{P as E}from"./plus-Di1vzuUD.js";import{C as $}from"./calendar-DEfbCszA.js";import{C as I}from"./chevron-left-DuaQbI5e.js";/* empty css            */import"./button-QC1nj7U_.js";import"./utils-EVyv9-g_.js";import"./index-oYLwRzVA.js";import"./index-DBaJ8739.js";import"./x-SZWNBt5A.js";import"./users-hLc63D4i.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],j=h("CircleArrowDown",R);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],v=h("CircleArrowUp",U);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],H=h("User",F),q=[{title:"Mouvement Article",href:"/mvt-article"}],re=()=>{const[i,N]=l.useState([]),[r,b]=l.useState([]),[p,f]=l.useState(!0),[d,y]=l.useState(""),[c,w]=l.useState("all"),[a,o]=l.useState(1),x=5;l.useEffect(()=>{(async()=>{try{const s=await fetch("/api/mvt-articles"),{data:g}=await s.json();console.log("Mouvement Articles Data:",g),N(g||[]),b(g||[]),f(!1)}catch(s){console.error("Error fetching mouvement articles:",s),f(!1)}})()},[]);const C=[{label:"Tous",value:i.length,filterType:"all",icon:u,colorClasses:{text:"text-slate-800 dark:text-slate-100",bg:"bg-blue-100 dark:bg-blue-900/30",icon:"text-blue-600 dark:text-blue-400"}},{label:"Entr√©es",value:i.filter(t=>t.mvtType==="entree").length,filterType:"entree",icon:v,colorClasses:{text:"text-green-600 dark:text-green-400",bg:"bg-green-100 dark:bg-green-900/30",icon:"text-green-600 dark:text-green-400"}},{label:"Sorties",value:i.filter(t=>t.mvtType==="sortie").length,filterType:"sortie",icon:j,colorClasses:{text:"text-red-600 dark:text-red-400",bg:"bg-red-100 dark:bg-red-900/30",icon:"text-red-600 dark:text-red-400"}}];l.useEffect(()=>{let t=i;c!=="all"&&(t=t.filter(s=>s.mvtType===c)),d&&(t=t.filter(s=>s.article?.article_name.toLowerCase().includes(d.toLowerCase())||s.article?.article_reference.toLowerCase().includes(d.toLowerCase())||s.user?.name.toLowerCase().includes(d.toLowerCase()))),b(t),o(1)},[d,c,i]);const T=t=>new Date(t).toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric"}),n=Math.ceil(r.length/x),m=(a-1)*x,k=m+x,P=r.slice(m,k),A=()=>{a<n&&o(a+1)},M=()=>{a>1&&o(a-1)};return e.jsxs(S,{breadcrumbs:q,children:[e.jsx(_,{title:"Mouvement Articles"}),p?e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-b-2 border-blue-500 dark:border-blue-400"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 rounded-t-lg bg-gray-50 px-4 pt-4 lg:grid-cols-2 dark:bg-white/10",children:[e.jsxs("div",{className:"",children:[e.jsx("h1",{className:"mb-2 text-3xl font-bold text-slate-800 dark:text-slate-100",children:"üì¶ Mouvement Articles"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Gestion des entr√©es et sorties de stock"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-3",children:C.map(t=>{const s=t.icon;return e.jsx("div",{className:"cursor-pointer rounded-xl border border-slate-200 bg-white px-4 py-2 shadow-sm dark:border-gray-500/50 dark:bg-black",onClick:()=>w(t.filterType),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-slate-600 dark:text-slate-400",children:t.label}),e.jsx("p",{className:`text-3xl font-bold ${t.colorClasses.text}`,children:t.value})]}),e.jsx("div",{className:`rounded-lg p-3 ${t.colorClasses.bg}`,children:e.jsx(s,{className:`h-8 w-8 ${t.colorClasses.icon}`})})]})},t.filterType)})})]}),e.jsx("div",{className:"rounded-b-lg bg-gray-50 p-4 dark:bg-white/10",children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsx("div",{className:"flex flex-1 items-center gap-2",children:e.jsxs("div",{className:"relative max-w-md flex-1",children:[e.jsx(D,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Rechercher un article, r√©f√©rence ou utilisateur...",value:d,onChange:t=>y(t.target.value),className:"w-full rounded-lg border border-slate-200 bg-white py-2 pr-4 pl-10 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none dark:border-gray-500/50 dark:bg-black dark:text-slate-100"})]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600",children:[e.jsx(E,{className:"h-4 w-4"}),"Nouveau"]})})]})})]}),!p&&r.length>0&&e.jsxs("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-gray-50 shadow-sm dark:border-gray-500/50 dark:bg-white/10",children:[e.jsx("div",{className:"border-b border-slate-200 p-4 dark:border-gray-500/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"Liste des Mouvements"}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[r.length," r√©sultat",r.length>1?"s":""]})]})}),e.jsx("div",{className:"divide-y divide-slate-200 dark:divide-gray-500/50",children:P.map(t=>e.jsx("div",{className:"p-6 transition-colors duration-150 hover:bg-white dark:hover:bg-black",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex flex-1 items-start space-x-4",children:[e.jsx("div",{className:`flex-shrink-0 rounded-lg p-3 ${t.mvtType==="entree"?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"}`,children:t.mvtType==="entree"?e.jsx(v,{className:"h-6 w-6 text-green-600 dark:text-green-400"}):e.jsx(j,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-1 flex items-center space-x-3",children:[e.jsx("span",{className:`rounded-full px-3 py-1 text-sm font-medium ${t.mvtType==="entree"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"}`,children:t.mvtType==="entree"?"‚Üë Entr√©e":"‚Üì Sortie"}),e.jsx("span",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:t.mvt_quantity}),e.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:t.article?.article_unit√©||"unit√©s"})]}),t.article&&e.jsx("div",{className:"",children:e.jsxs("h3",{className:"flex items-center text-sm font-semibold text-slate-800 dark:text-slate-100",children:[e.jsx(u,{className:"mr-2 h-4 w-4 text-blue-600 dark:text-blue-400"}),t.article.article_name]})})]})]}),e.jsxs("div",{className:"ml-4 flex-shrink-0 text-right",children:[e.jsxs("div",{className:"flex items-center justify-end text-sm text-slate-500 dark:text-slate-400",children:[e.jsx($,{className:"mr-1 h-4 w-4"}),T(t.mvt_date)]}),t.user&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400 dark:text-slate-500",children:[e.jsx(H,{className:"h-4 w-4 text-slate-400 dark:text-slate-500"}),e.jsx("span",{className:"font-medium",children:t.user.name}),e.jsx("span",{className:"hidden text-slate-400 lg:block dark:text-slate-500",children:"‚Ä¢"}),e.jsx("span",{className:"hidden rounded-full bg-purple-100 px-2 py-1 text-xs text-purple-700 lg:block dark:bg-purple-900/30 dark:text-purple-300",children:t.user.user_role})]})]})]})},t.mvt_id))}),n>1&&e.jsx("div",{className:"border-t border-slate-200 bg-slate-50 px-6 py-4 dark:border-gray-500/50 dark:bg-black",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Affichage de ",m+1," √† ",Math.min(k,r.length)," sur"," ",r.length," mouvement",r.length>1?"s":""]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:M,disabled:a===1,className:"flex items-center gap-1 rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm font-medium text-slate-700 transition-colors hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-500/50 dark:bg-slate-800 dark:text-slate-200 dark:hover:bg-slate-700",children:[e.jsx(I,{className:"h-4 w-4"}),"Pr√©c√©dent"]}),e.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Page ",a," sur ",n]}),e.jsxs("button",{onClick:A,disabled:a===n,className:"flex items-center gap-1 rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm font-medium text-slate-700 transition-colors hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-500/50 dark:bg-slate-800 dark:text-slate-200 dark:hover:bg-slate-700",children:["Suivant",e.jsx(L,{className:"h-4 w-4"})]})]})]})})]}),r.length===0&&e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(u,{className:"mx-auto mb-4 h-16 w-16 text-slate-300 dark:text-slate-600"}),e.jsx("p",{className:"text-lg text-slate-500 dark:text-slate-400",children:d||c!=="all"?"Aucun r√©sultat trouv√©":"Aucun mouvement trouv√©"})]})]})]})};export{re as default};
