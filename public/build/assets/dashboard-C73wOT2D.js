import{r as o,j as e,c as y}from"./app-CZZSJwVs.js";import{H as C}from"./head-CtolxvMC.js";import{A,P as b}from"./app-layout-Dip1ZNgN.js";import{C as $}from"./calendar-D6CqhYat.js";import{T as i}from"./trending-up-oGo2K2n9.js";import{c as d}from"./createLucideIcon-R6YbXi8S.js";import{F as n,U as c}from"./users-BhaxzfHi.js";import{C as D}from"./clock-CGwbv694.js";/* empty css            */import"./button-CpOZINt4.js";import"./utils-EVyv9-g_.js";import"./index-DljurC_Y.js";import"./index-DmPSOIxm.js";import"./x-CngOunTo.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],T=d("ChevronDown",_);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],E=d("ChevronUp",B);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],S=d("CircleAlert",F);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],M=d("CircleCheck",q);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]],j=d("Euro",U);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],I=d("FileCheck",G);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],V=d("TrendingDown",P),z=[{title:"Dashboard",href:"/dashboard"}];function de(){const[r,k]=o.useState(null),[H,x]=o.useState(!0),[L,h]=o.useState(null),[m,R]=o.useState("30days");o.useEffect(()=>{(async()=>{try{x(!0),h(null);const s=await fetch(`/api/dashboard?period=${m}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});if(!s.ok)throw new Error(`Erreur HTTP: ${s.status}`);const a=await s.json();k(a)}catch(s){console.error("Erreur lors du chargement du dashboard:",s),h(s instanceof Error?s.message:"Une erreur est survenue")}finally{x(!1)}})()},[m]);const p=t=>t==="Euro"?j:t==="FileText"?n:t==="Package"?b:t==="CheckCircle2"?M:t==="Clock"?D:t==="FileCheck"?I:c,f=[{label:"Gestion facture",icon:n,href:"/quotes",colorClasses:{icon:"text-blue-600 dark:text-blue-400",hoverBorder:"hover:border-blue-500",hoverBg:"hover:bg-blue-50 dark:hover:bg-blue-900/20"}},{label:"Gestion article",icon:b,href:"/articles",colorClasses:{icon:"text-purple-600 dark:text-purple-400",hoverBorder:"hover:border-purple-500",hoverBg:"hover:bg-purple-50 dark:hover:bg-purple-900/20"}},{label:"Gestion client",icon:c,href:"/clients",colorClasses:{icon:"text-orange-600 dark:text-orange-400",hoverBorder:"hover:border-orange-500",hoverBg:"hover:bg-orange-50 dark:hover:bg-orange-900/20"}},{label:"Voir rapports",icon:i,href:"/",colorClasses:{icon:"text-green-600 dark:text-green-400",hoverBorder:"hover:border-green-500",hoverBg:"hover:bg-green-50 dark:hover:bg-green-900/20"}}],v=t=>{t.onClick?t.onClick():t.href&&y.visit(t.href)},w=()=>{const[t,s]=o.useState(!1),a=t?r?.recentActivities:r?.recentActivities.slice(0,3),N=(r?.recentActivities.length??0)>3,g=(r?.recentActivities.length??0)-3;return e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-white/20 dark:bg-white/10",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Activités récentes"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[a?.map((l,u)=>e.jsx("div",{className:"rounded-lg border border-slate-100 p-3 transition-colors animate-in fade-in slide-in-from-top-2 hover:bg-slate-50 dark:border-white/20 dark:hover:bg-gray-700/50",style:{animationDelay:`${u*50}ms`},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`rounded-full p-2 ${l.type==="alert"?"bg-red-100 dark:bg-red-900/30":l.type==="payment"?"bg-green-100 dark:bg-green-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:l.type==="alert"?e.jsx(S,{className:"h-4 w-4 text-red-600 dark:text-red-400"}):l.type==="user"?e.jsx(c,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}):l.type==="payment"?e.jsx(j,{className:"h-4 w-4 text-green-600 dark:text-green-400"}):e.jsx(n,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"truncate text-sm font-medium text-slate-900 dark:text-white",children:l.action}),e.jsx("p",{className:"truncate text-xs text-slate-600 dark:text-slate-300",children:l.client}),e.jsx("p",{className:"mt-0.5 text-xs text-slate-500 dark:text-slate-300",children:l.time})]})]})},u)),N&&e.jsx("button",{onClick:()=>s(!t),className:"group flex w-full items-center justify-center gap-2 rounded-lg border border-slate-200 p-2.5 text-sm font-medium text-slate-600 transition-all hover:border-blue-300 hover:bg-blue-50 hover:text-blue-600 dark:border-white/20 dark:text-slate-300 dark:hover:border-blue-500 dark:hover:bg-blue-900/20 dark:hover:text-blue-400",children:t?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-4 w-4 transition-transform group-hover:-translate-y-0.5"}),"Voir moins"]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"h-4 w-4 transition-transform group-hover:translate-y-0.5"}),"Voir ",g," activité",g>1?"s":""," de plus"]})})]})]})};return e.jsxs(A,{breadcrumbs:z,children:[e.jsx(C,{title:"Dashboard"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl bg-slate-50 p-6 dark:bg-transparent",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Tableau de bord"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Vue d'ensemble de votre activité commerciale"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{children:new Date().toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:r?.stats.map((t,s)=>{const a=p(t.icon);return e.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm transition-all hover:shadow-md dark:border-white/20 dark:bg-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:t.title}),e.jsx("p",{className:"mt-2 text-3xl font-bold text-slate-900 dark:text-white",children:t.value}),e.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[t.changeType==="positive"?e.jsx(i,{className:"h-4 w-4 text-green-500"}):e.jsx(V,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:`text-sm font-medium ${t.changeType==="positive"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:t.change}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-300",children:"vs mois dernier"})]})]}),e.jsx("div",{className:`rounded-full ${t.bgColor} bg-opacity-10 dark:bg-opacity-20 p-3`,children:e.jsx(a,{className:"h-6 w-6 text-white"})})]})},s)})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:r?.invoicesStatus.map((t,s)=>{const a=p(t.icon);return e.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-5 shadow-sm dark:border-white/20 dark:bg-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:t.status}),e.jsx("p",{className:`mt-2 text-2xl font-bold ${t.color}`,children:t.count}),e.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-300",children:t.amount})]}),e.jsx("div",{className:`rounded-lg p-3 ${t.bgColor}`,children:e.jsx(a,{className:`h-6 w-6 ${t.color}`})})]})},s)})}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm lg:col-span-2 dark:border-white/20 dark:bg-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Évolution du chiffre d'affaires"}),e.jsxs("select",{className:"rounded-lg border border-slate-300 bg-white px-3 py-1.5 text-sm dark:border-gray-600 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{children:"7 derniers jours"}),e.jsx("option",{children:"30 derniers jours"}),e.jsx("option",{children:"Ce mois-ci"}),e.jsx("option",{children:"Cette année"})]})]}),e.jsx("div",{className:"mt-4 flex h-64 items-center justify-center text-slate-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx(i,{className:"mx-auto h-12 w-12 text-slate-300 dark:text-slate-600"}),e.jsx("p",{className:"mt-2 text-sm",children:"Graphique à intégrer (Recharts, Chart.js...)"})]})})]}),e.jsx(w,{})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[r?.topArticles&&r.topArticles.length>0&&e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-white/20 dark:bg-white/10",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Articles les plus vendus"}),e.jsx("div",{className:"mt-4 space-y-3",children:r?.topArticles.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 p-3 dark:border-white/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-purple-100 text-sm font-semibold text-purple-600 dark:bg-purple-900/30 dark:text-purple-400",children:s+1}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:t.name}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-300",children:[t.sales," ventes"]})]})]}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:t.revenue})]},s))})]}),r?.topClients&&r.topClients.length>0&&e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-white/20 dark:bg-white/10",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Meilleurs clients"}),e.jsx("div",{className:"mt-4 space-y-3",children:r?.topClients.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-slate-100 p-3 dark:border-white/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-orange-100 text-sm font-semibold text-orange-600 dark:bg-orange-900/30 dark:text-orange-400",children:s+1}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:t.name}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-300",children:[t.invoices," factures"]})]})]}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:t.amount})]},s))})]})]}),e.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-white/20 dark:bg-white/10",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Actions rapides"}),e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-4 sm:grid-cols-4",children:f.map((t,s)=>{const a=t.icon;return e.jsxs("button",{onClick:()=>v(t),className:`flex cursor-pointer flex-col items-center gap-2 rounded-lg border border-slate-200 p-4 transition-all dark:border-white/20 ${t.colorClasses.hoverBorder} ${t.colorClasses.hoverBg}`,children:[e.jsx(a,{className:`h-6 w-6 ${t.colorClasses.icon}`}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:t.label})]},s)})})]})]})]})}export{de as default};
