import{r as c,j as e,H as g}from"./app-ogXugpMF.js";/* empty css            */function N({telegram_id:_}){const[r,u]=c.useState({company_name:"",company_email:"",company_description:"",company_phone:"",company_website:"",company_address:""}),[a,d]=c.useState({}),[n,i]=c.useState(!1),[o,h]=c.useState(null),[p,x]=c.useState(!1);c.useEffect(()=>{const s=window.Telegram?.WebApp;if(s){h(s),s.ready(),s.expand(),s.enableClosingConfirmation(),document.body.style.backgroundColor=s.themeParams?.bg_color||"#ffffff",document.body.style.color=s.themeParams?.text_color||"#000000",s.MainButton.setText("‚úÖ Cr√©er l'entreprise"),s.MainButton.color=s.themeParams?.button_color||"#3390ec",s.MainButton.textColor=s.themeParams?.button_text_color||"#ffffff",s.MainButton.show();const t=()=>b();return s.MainButton.onClick(t),setTimeout(()=>{x(!0)},1e3),()=>{s.MainButton.offClick(t),s.MainButton.hide()}}else console.warn("Telegram WebApp non disponible"),x(!0)},[]);const l=s=>{const{name:t,value:f}=s.target;u(m=>({...m,[t]:f})),a[t]&&d(m=>({...m,[t]:void 0}))},y=()=>{const s={};r.company_name.trim()?r.company_name.trim().length<2&&(s.company_name="Le nom doit contenir au moins 2 caract√®res"):s.company_name="Le nom de l'entreprise est requis";const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return r.company_email.trim()?t.test(r.company_email)||(s.company_email="L'email doit √™tre valide"):s.company_email="L'email est requis",r.company_description.trim()?r.company_description.trim().length<10&&(s.company_description="La description doit contenir au moins 10 caract√®res"):s.company_description="La description est requise",r.company_phone.trim()?r.company_phone.trim().length<8&&(s.company_phone="Le t√©l√©phone doit contenir au moins 8 caract√®res"):s.company_phone="Le t√©l√©phone est requis",r.company_address.trim()?r.company_address.trim().length<5&&(s.company_address="L'adresse doit contenir au moins 5 caract√®res"):s.company_address="L'adresse est requise",d(s),Object.keys(s).length===0},b=()=>{if(console.log("=== D√âBUT SUBMIT ==="),console.log("TG disponible?",!!o),console.log("FormData:",r),!y()){console.log("Validation √©chou√©e"),o?o.showAlert("‚ö†Ô∏è Veuillez corriger les erreurs dans le formulaire"):alert("‚ö†Ô∏è Veuillez corriger les erreurs dans le formulaire");return}console.log("Validation OK, envoi des donn√©es..."),i(!0),o?.MainButton.showProgress();try{const s=JSON.stringify(r);console.log("Donn√©es √† envoyer:",s),o?(console.log("Envoi via Telegram WebApp..."),o.sendData(s),console.log("Donn√©es envoy√©es, fermeture dans 1s..."),setTimeout(()=>{console.log("Fermeture de la WebApp"),o.close()},1e3)):(console.error("Telegram WebApp non disponible!"),alert("‚ùå Telegram WebApp non disponible. Donn√©es: "+s),i(!1))}catch(s){console.error("Erreur lors de l'envoi:",s),o?o.showAlert("‚ùå Une erreur est survenue: "+s):alert("‚ùå Une erreur est survenue: "+s),o?.MainButton.hideProgress(),i(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(g,{title:"Cr√©er une entreprise"}),e.jsx("div",{className:"min-h-screen p-6 pb-24",style:{backgroundColor:o?.themeParams?.bg_color||"#ffffff",color:o?.themeParams?.text_color||"#000000"},children:e.jsxs("div",{className:"mx-auto max-w-2xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"mb-2 text-3xl font-bold",children:"üè¢ Cr√©er mon entreprise"}),e.jsx("p",{className:"text-sm opacity-70",children:"Remplissez les informations de votre entreprise"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"company_name",className:"mb-2 block text-sm font-semibold",children:["Nom de l'entreprise ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"company_name",name:"company_name",value:r.company_name,onChange:l,placeholder:"Ex: TechSolutions SARL",className:`w-full rounded-xl border-2 px-4 py-3 transition-all ${a.company_name?"border-red-500 bg-red-50":"border-gray-200 focus:border-blue-500"}`,style:{backgroundColor:o?.themeParams?.secondary_bg_color||"#f5f5f5",color:o?.themeParams?.text_color||"#000000"},disabled:n}),a.company_name&&e.jsxs("p",{className:"mt-1 flex items-center gap-1 text-sm text-red-500",children:[e.jsx("span",{children:"‚ö†Ô∏è"})," ",a.company_name]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"company_email",className:"mb-2 block text-sm font-semibold",children:["Email professionnel ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",id:"company_email",name:"company_email",value:r.company_email,onChange:l,placeholder:"Ex: contact@techsolutions.mg",className:`w-full rounded-xl border-2 px-4 py-3 transition-all ${a.company_email?"border-red-500 bg-red-50":"border-gray-200 focus:border-blue-500"}`,style:{backgroundColor:o?.themeParams?.secondary_bg_color||"#f5f5f5",color:o?.themeParams?.text_color||"#000000"},disabled:n}),a.company_email&&e.jsxs("p",{className:"mt-1 flex items-center gap-1 text-sm text-red-500",children:[e.jsx("span",{children:"‚ö†Ô∏è"})," ",a.company_email]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"company_description",className:"mb-2 block text-sm font-semibold",children:["Description de l'activit√© ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"company_description",name:"company_description",value:r.company_description,onChange:l,placeholder:"Ex: D√©veloppement de solutions web et mobile pour entreprises",rows:4,className:`w-full resize-y rounded-xl border-2 px-4 py-3 transition-all ${a.company_description?"border-red-500 bg-red-50":"border-gray-200 focus:border-blue-500"}`,style:{backgroundColor:o?.themeParams?.secondary_bg_color||"#f5f5f5",color:o?.themeParams?.text_color||"#000000"},disabled:n}),a.company_description&&e.jsxs("p",{className:"mt-1 flex items-center gap-1 text-sm text-red-500",children:[e.jsx("span",{children:"‚ö†Ô∏è"})," ",a.company_description]}),e.jsxs("p",{className:"mt-1 text-xs opacity-60",children:[r.company_description.length," / 500 caract√®res"]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"company_phone",className:"mb-2 block text-sm font-semibold",children:["T√©l√©phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",id:"company_phone",name:"company_phone",value:r.company_phone,onChange:l,placeholder:"Ex: +261 34 12 345 67",className:`w-full rounded-xl border-2 px-4 py-3 transition-all ${a.company_phone?"border-red-500 bg-red-50":"border-gray-200 focus:border-blue-500"}`,style:{backgroundColor:o?.themeParams?.secondary_bg_color||"#f5f5f5",color:o?.themeParams?.text_color||"#000000"},disabled:n}),a.company_phone&&e.jsxs("p",{className:"mt-1 flex items-center gap-1 text-sm text-red-500",children:[e.jsx("span",{children:"‚ö†Ô∏è"})," ",a.company_phone]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"company_website",className:"mb-2 block text-sm font-semibold",children:["Site web ",e.jsx("span",{className:"text-gray-400",children:"(optionnel)"})]}),e.jsx("input",{type:"url",id:"company_website",name:"company_website",value:r.company_website,onChange:l,placeholder:"Ex: www.techsolutions.mg",className:"w-full rounded-xl border-2 border-gray-200 px-4 py-3 transition-all focus:border-blue-500",style:{backgroundColor:o?.themeParams?.secondary_bg_color||"#f5f5f5",color:o?.themeParams?.text_color||"#000000"},disabled:n})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"company_address",className:"mb-2 block text-sm font-semibold",children:["Adresse compl√®te ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"company_address",name:"company_address",value:r.company_address,onChange:l,placeholder:"Ex: Lot II A 45, Antananarivo 101",rows:3,className:`w-full resize-y rounded-xl border-2 px-4 py-3 transition-all ${a.company_address?"border-red-500 bg-red-50":"border-gray-200 focus:border-blue-500"}`,style:{backgroundColor:o?.themeParams?.secondary_bg_color||"#f5f5f5",color:o?.themeParams?.text_color||"#000000"},disabled:n}),a.company_address&&e.jsxs("p",{className:"mt-1 flex items-center gap-1 text-sm text-red-500",children:[e.jsx("span",{children:"‚ö†Ô∏è"})," ",a.company_address]})]})]}),e.jsx("div",{className:"mt-8 rounded-xl border-2 border-blue-200 bg-blue-50 p-4",children:e.jsxs("p",{className:"flex items-start gap-2 text-sm text-blue-800",children:[e.jsx("span",{className:"text-lg",children:"‚ÑπÔ∏è"}),e.jsx("span",{children:p?"Cliquez sur le bouton ci-dessous pour cr√©er votre entreprise":"Cliquez sur le bouton en bas de l'√©cran pour cr√©er votre entreprise"})]})}),p&&e.jsx("div",{className:"fixed right-0 bottom-0 left-0 border-t-2 border-gray-200 bg-white p-4",children:e.jsx("button",{onClick:b,disabled:n,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-blue-500 px-6 py-4 font-bold text-white transition-colors hover:bg-blue-600 active:bg-blue-700 disabled:bg-gray-400",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Cr√©ation en cours..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"‚úÖ"}),e.jsx("span",{children:"Cr√©er l'entreprise"})]})})})]})})]})}export{N as default};
