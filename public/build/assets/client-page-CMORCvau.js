import{r as o,j as e,a as p}from"./app-DFgrf_X3.js";import{H as w}from"./head-BZT50ZaW.js";import{A as _,C}from"./app-layout-BwKxZyAn.js";import{P as A}from"./plus-78o4dJKK.js";import{S}from"./search-DrAnp09o.js";import{c as y}from"./createLucideIcon-D1BKN4nH.js";import{M as L,P as E}from"./phone-CKkhnQo_.js";import{M as P}from"./map-pin-DBFRejy9.js";import{E as M}from"./eye-CM6wrHE8.js";import{S as I}from"./square-pen-CfAM0eYy.js";import{C as H}from"./chevron-left-yKzY9ZI9.js";/* empty css            */import"./button-BVYUT_dI.js";import"./utils-EVyv9-g_.js";import"./index-8r3aVqqk.js";import"./index-CD00512Z.js";import"./x-PRgloLTK.js";import"./users-BnPD0hKz.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],F=y("Filter",T);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],z=y("Trash2",V),$=[{title:"Clients",href:"/clients"}],se=()=>{const[x,b]=o.useState(""),[m,f]=o.useState("all"),[n,i]=o.useState([]),[s,h]=o.useState({current_page:1,last_page:1,per_page:15,total:0,from:0,to:0}),[c,g]=o.useState(!1);o.useEffect(()=>{(async()=>{g(!0);try{const l=(await p.get("/api/clients")).data;if(l.success&&l.data){const a=l.data;i(a.data),h({current_page:a.current_page,last_page:a.last_page,per_page:a.per_page,total:a.total,from:a.from,to:a.to})}else console.error("Erreur API:",l.message),i([])}catch(r){p.isAxiosError(r)?console.error("Erreur API:",r.response?.data?.message||r.message):console.error("Erreur lors du chargement:",r),i([])}finally{g(!1)}})()},[]);const d=Array.isArray(n)?n.filter(t=>{const r=t.client_name.toLowerCase().includes(x.toLowerCase())||t.client_email.toLowerCase().includes(x.toLowerCase())||t.client_reference.toLowerCase().includes(x.toLowerCase()),l=m==="all"||t.client_status===m;return r&&l}):[],j=t=>({active:"bg-green-100 text-green-700 border-green-200",inactive:"bg-gray-100 text-gray-700 border-gray-200",pending:"bg-yellow-100 text-yellow-700 border-yellow-200"})[t],v=t=>({active:"Actif",inactive:"Inactif",pending:"En attente"})[t],N=Array.isArray(n)?n.filter(t=>t.client_status==="active").length:0,k=Array.isArray(n)?n.filter(t=>t.client_note?.toLowerCase().includes("vip")).length:0,u=async t=>{g(!0);try{const l=await(await fetch(`/api/clients?page=${t}`)).json();if(l.success&&l.data){const a=l.data;i(a.data),h({current_page:a.current_page,last_page:a.last_page,per_page:a.per_page,total:a.total,from:a.from,to:a.to})}else console.error("Erreur API:",l.message),i([])}catch(r){console.error("Erreur lors du changement de page:",r),i([])}finally{g(!1)}};return s.total,n.length,e.jsxs(_,{breadcrumbs:$,children:[e.jsx(w,{title:"Clients"}),e.jsxs("div",{className:"rounded-2xl bg-gray-50 p-6 dark:bg-white/15 dark:text-white",children:[e.jsx("div",{className:"mb-2",children:e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"ðŸ‘¥ Clients"}),e.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-300",children:"GÃ©rez vos clients et leurs informations"})]}),e.jsxs("button",{className:"flex cursor-pointer items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-white transition-colors hover:bg-blue-700",children:[e.jsx(A,{className:"h-4 w-4"}),"Nouveau Client"]})]})}),e.jsxs("div",{className:"flex flex-col gap-4 pt-4 sm:flex-row",children:[e.jsxs("div",{className:"relative flex-1 rounded-lg bg-white dark:bg-black",children:[e.jsx(S,{className:"absolute top-1/2 left-3 h-5 w-5 -translate-y-1/2 transform text-gray-400"}),e.jsx("input",{type:"search",placeholder:"Rechercher par nom, email ou rÃ©fÃ©rence...",className:"w-full rounded-lg border border-gray-300 py-2 pr-4 pl-10 outline-none focus:border-transparent focus:ring-2 focus:ring-blue-500 dark:border-gray-500",value:x,onChange:t=>b(t.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"cursor-pointer rounded-lg border border-gray-300 bg-white px-4 py-2 outline-none focus:border-transparent focus:ring-2 focus:ring-blue-500 dark:border-gray-500 dark:bg-black",value:m,onChange:t=>f(t.target.value),children:[e.jsx("option",{className:"dark:bg-black",value:"all",children:"Tous les statuts"}),e.jsx("option",{className:"dark:bg-black",value:"active",children:"Actif"}),e.jsx("option",{className:"dark:bg-black",value:"inactive",children:"Inactif"}),e.jsx("option",{className:"dark:bg-black",value:"pending",children:"En attente"})]}),e.jsxs("button",{className:"flex items-center gap-2 rounded-lg border border-gray-300 px-4 py-2 hover:bg-gray-50 dark:border-gray-500 dark:bg-black dark:hover:bg-gray-900",children:[e.jsx(F,{className:"h-4 w-4"}),"Filtres"]})]})]})]}),e.jsxs("div",{className:"mt-6 overflow-hidden rounded-lg bg-gray-50 dark:bg-white/10",children:[c&&e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-4 border-gray-200 border-t-blue-600 dark:border-gray-600 dark:border-t-blue-400"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Chargement des clients..."})]})}),!c&&n.length===0&&e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800",children:e.jsx("svg",{className:"h-10 w-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),e.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Aucun client disponible"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Commencez par ajouter votre premier client"})]}),!c&&n.length>0&&d.length===0&&e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800",children:e.jsx("svg",{className:"h-10 w-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Aucun rÃ©sultat trouvÃ©"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Essayez avec d'autres mots-clÃ©s"})]}),!c&&d.length>0&&e.jsx("div",{className:"overflow-x-auto",children:d.length>0&&e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-white/10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-10 py-3 text-left text-xs font-medium tracking-wider text-gray-600 uppercase dark:text-gray-300",children:"Client"}),e.jsx("th",{className:"px-10 py-3 text-left text-xs font-medium tracking-wider text-gray-600 uppercase dark:text-gray-300",children:"Contact"}),e.jsx("th",{className:"px-10 py-3 text-left text-xs font-medium tracking-wider text-gray-600 uppercase dark:text-gray-300",children:"Localisation"}),e.jsx("th",{className:"px-10 py-3 text-left text-xs font-medium tracking-wider text-gray-600 uppercase dark:text-gray-300",children:"Statut"}),e.jsx("th",{className:"px-10 py-3 text-right text-xs font-medium tracking-wider text-gray-600 uppercase dark:text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-950",children:d.map(t=>e.jsxs("tr",{className:"transition-colors hover:bg-white dark:hover:bg-black",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-3 flex h-10 w-10 items-center justify-center rounded-full bg-blue-100 font-semibold text-blue-600",children:t.client_name.split(" ").map(r=>r[0]).join("").toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-200",children:t.client_name}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-300",children:t.client_reference})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-200",children:[e.jsx(L,{className:"mr-2 h-4 w-4 text-gray-400"}),t.client_email]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(E,{className:"mr-2 h-4 w-4 text-gray-400"}),t.client_phone]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-start text-sm text-gray-600 dark:text-gray-200",children:[e.jsx(P,{className:"mt-0.5 mr-2 h-4 w-4 flex-shrink-0 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{children:t.client_adress}),t.client_city&&e.jsxs("div",{className:"text-gray-500 dark:text-gray-300",children:[t.client_city,", "]}),e.jsx("div",{className:"text-gray-500 dark:text-gray-300",children:t.client_country})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium ${j(t.client_status)}`,children:v(t.client_status)})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{className:"rounded-lg p-2 text-gray-600 transition-colors hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-white/20",title:"Voir",children:e.jsx(M,{className:"h-4 w-4"})}),e.jsx("button",{className:"rounded-lg p-2 text-blue-600 transition-colors hover:bg-blue-50",title:"Modifier",children:e.jsx(I,{className:"h-4 w-4"})}),e.jsx("button",{className:"rounded-lg p-2 text-red-600 transition-colors hover:bg-red-50",title:"Supprimer",children:e.jsx(z,{className:"h-4 w-4"})})]})})]},t.client_id))})]})}),!c&&d.length>0&&e.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 border-t border-gray-200 px-6 py-4 sm:flex-row dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Affichage de ",e.jsx("span",{className:"font-medium",children:s.from})," Ã  ",e.jsx("span",{className:"font-medium",children:s.to})," ","sur ",e.jsx("span",{className:"font-medium",children:s.total})," rÃ©sultat(s)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"flex cursor-pointer items-center gap-1 rounded-lg border border-gray-300 px-3 py-2 text-sm hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50 dark:hover:bg-slate-900",disabled:s.current_page===1,onClick:()=>u(s.current_page-1),children:[e.jsx(H,{className:"h-4 w-4"}),"PrÃ©cÃ©dent"]}),e.jsx("div",{className:"flex gap-1",children:[...Array(s.last_page)].map((t,r)=>e.jsx("button",{className:`rounded-lg px-3 py-2 text-sm ${s.current_page===r+1?"bg-blue-600 text-white":"cursor-pointer border border-gray-300 hover:bg-gray-50 dark:hover:bg-slate-900"}`,onClick:()=>u(r+1),children:r+1},r+1))}),e.jsxs("button",{className:"flex cursor-pointer items-center gap-1 rounded-lg border border-gray-300 px-3 py-2 text-sm hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50 dark:hover:bg-slate-900",disabled:s.current_page===s.last_page,onClick:()=>u(s.current_page+1),children:["Suivant",e.jsx(C,{className:"h-4 w-4"})]})]})]})]})]})};export{se as default};
