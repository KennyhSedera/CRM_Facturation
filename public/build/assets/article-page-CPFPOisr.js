import{r as d,u as M,j as e}from"./app-GTaubTcA.js";import{H as _}from"./head-Da9qZ8wB.js";import{A as S}from"./app-layout-DB3m_E9-.js";import{G as u}from"./iconBase-DheuAwgQ.js";/* empty css            */import"./button-C5zRHqSV.js";import"./utils-EVyv9-g_.js";import"./index-CqSS218N.js";import"./index-CdcboxNt.js";import"./x-BZiR5Ih-.js";import"./createLucideIcon-9cEdyDxU.js";import"./users-VQ6q7hys.js";function P(l){return u({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(l)}function E(l){return u({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(l)}function W(l){return u({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M221.09 64a157.09 157.09 0 1 0 157.09 157.09A157.1 157.1 0 0 0 221.09 64z"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29 448 448"},child:[]}]})(l)}const B=[{title:"Articles",href:"/article"}],J=()=>{const[l,y]=d.useState([]),[c,k]=d.useState(!0),[n,p]=d.useState(""),[r,g]=d.useState(1),[x,f]=d.useState(10),{auth:j}=M().props,N=async()=>{try{const t=await fetch("/api/articles/company/"+j?.user?.company_id),{data:o}=await t.json();y(o)}catch(t){console.error(t)}finally{k(!1)}};d.useEffect(()=>{N()},[]);const a=l.filter(t=>t.article_name.toLowerCase().includes(n.toLowerCase())||t.article_reference.toLowerCase().includes(n.toLowerCase())||t.article_source.toLowerCase().includes(n.toLowerCase())),i=Math.ceil(a.length/x),h=(r-1)*x,b=h+x,v=a.slice(h,b);d.useEffect(()=>{g(1)},[n]);const m=t=>{g(t),window.scrollTo({top:0,behavior:"smooth"})},w=()=>{const t=[];if(i<=5)for(let s=1;s<=i;s++)t.push(s);else if(r<=3){for(let s=1;s<=4;s++)t.push(s);t.push("..."),t.push(i)}else if(r>=i-2){t.push(1),t.push("...");for(let s=i-3;s<=i;s++)t.push(s)}else t.push(1),t.push("..."),t.push(r-1),t.push(r),t.push(r+1),t.push("..."),t.push(i);return t},L=t=>t===0?{text:"Rupture",color:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}:t<10?{text:"Faible",color:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400"}:{text:"En stock",color:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"},C=t=>{console.log("Edit article:",t)},A=t=>{console.log("Delete article:",t)};return e.jsxs(S,{breadcrumbs:B,children:[e.jsx(_,{title:"Articles"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-xl bg-gray-50 p-6 shadow-sm dark:bg-white/15",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"ðŸ“¦ Gestion des articles"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"GÃ©rez votre inventaire d'articles et produits"})]}),e.jsx("button",{className:"rounded-lg bg-blue-600 px-6 py-3 font-semibold text-white shadow-md transition hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none",children:"+ Nouvel article"})]}),e.jsx("div",{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col items-start gap-4 lg:flex-row lg:justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute top-1/2 left-3 h-5 w-5 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Rechercher par nom, rÃ©fÃ©rence ou source...",value:n,onChange:t=>p(t.target.value),className:"w-full rounded-lg border border-gray-300 bg-white py-3 pr-4 pl-10 text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none dark:border-gray-600 dark:bg-black dark:text-gray-100 dark:placeholder-gray-400"}),n&&e.jsx("button",{onClick:()=>p(""),className:"absolute top-1/2 right-3 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n&&e.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:[a.length," rÃ©sultat",a.length>1?"s":""," trouvÃ©",a.length>1?"s":""]})]}),!c&&a.length>0&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 lg:ml-4",children:[e.jsx("label",{className:"text-sm whitespace-nowrap text-gray-600 dark:text-gray-400",children:"Articles par page:"}),e.jsxs("select",{value:x,onChange:t=>{f(Number(t.target.value)),g(1)},className:"rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none dark:border-gray-600 dark:bg-black dark:text-gray-100",children:[e.jsx("option",{className:"dark:bg-black",value:5,children:"5"}),e.jsx("option",{className:"dark:bg-black",value:10,children:"10"}),e.jsx("option",{className:"dark:bg-black",value:25,children:"25"}),e.jsx("option",{className:"dark:bg-black",value:50,children:"50"}),e.jsx("option",{className:"dark:bg-black",value:100,children:"100"})]})]})]})})]}),e.jsxs("div",{className:"overflow-hidden rounded-xl bg-white shadow-sm dark:bg-white/15",children:[c&&e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-4 border-gray-200 border-t-blue-600 dark:border-gray-600 dark:border-t-blue-400"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Chargement des articles..."})]})}),!c&&l.length===0&&e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800",children:e.jsx("svg",{className:"h-10 w-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),e.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Aucun article disponible"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Commencez par ajouter votre premier article"})]}),!c&&l.length>0&&a.length===0&&e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800",children:e.jsx("svg",{className:"h-10 w-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Aucun rÃ©sultat trouvÃ©"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Essayez avec d'autres mots-clÃ©s"})]}),!c&&a.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-black/20",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold tracking-wider text-gray-700 uppercase dark:text-gray-300",children:"Article"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold tracking-wider text-gray-700 uppercase dark:text-gray-300",children:"RÃ©fÃ©rence"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold tracking-wider text-gray-700 uppercase dark:text-gray-300",children:"Source"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold tracking-wider text-gray-700 uppercase dark:text-gray-300",children:"Prix unitaire"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold tracking-wider text-gray-700 uppercase dark:text-gray-300",children:"Stock"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold tracking-wider text-gray-700 uppercase dark:text-gray-300",children:"TVA"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold tracking-wider text-gray-700 uppercase dark:text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:v.map(t=>{const o=L(t.quantity_stock);return e.jsxs("tr",{className:"bg-gray-50 transition hover:bg-white dark:bg-transparent dark:hover:bg-black",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-blue-100 dark:bg-blue-900/30",children:e.jsx("span",{className:"text-lg",children:"ðŸ“¦"})}),e.jsx("div",{className:"ml-4 font-semibold text-gray-900 dark:text-gray-100",children:t.article_name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex rounded-full bg-gray-100 px-3 py-1 text-sm font-medium text-gray-700 dark:bg-gray-800 dark:text-gray-300",children:t.article_reference})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:t.article_source}),e.jsxs("td",{className:"px-6 py-4 text-right font-semibold text-gray-900 dark:text-gray-100",children:[Number(t.selling_price).toLocaleString()," FCFA"]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[t.quantity_stock," ",t.article_unitÃ©]}),e.jsx("span",{className:`inline-flex rounded-full px-2 py-0.5 text-xs font-medium ${o.color}`,children:o.text})]})}),e.jsxs("td",{className:"px-6 py-4 text-right text-sm text-gray-600 dark:text-gray-400",children:[t.article_tva," %"]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>C(t.article_id),className:"rounded-lg p-2 text-blue-600 transition hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30",title:"Modifier",children:e.jsx(P,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>A(t.article_id),className:"rounded-lg p-2 text-red-600 transition hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30",title:"Supprimer",children:e.jsx(E,{className:"h-4 w-4"})})]})})]},t.article_id)})})]})}),!c&&a.length>0&&e.jsx("div",{className:"border-t border-gray-200 bg-gray-50 px-6 py-4 dark:border-gray-700 dark:bg-black/20",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Affichage de ",e.jsx("span",{className:"font-semibold",children:h+1})," Ã "," ",e.jsx("span",{className:"font-semibold",children:Math.min(b,a.length)})," sur"," ",e.jsx("span",{className:"font-semibold",children:a.length})," rÃ©sultats"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>m(r-1),disabled:r===1,className:"rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 transition hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("div",{className:"flex items-center gap-1",children:w().map((t,o)=>t==="..."?e.jsx("span",{className:"px-3 py-2 text-gray-500 dark:text-gray-400",children:"..."},`ellipsis-${o}`):e.jsx("button",{onClick:()=>m(t),className:`rounded-lg px-4 py-2 text-sm font-medium transition ${r===t?"bg-blue-600 text-white dark:bg-blue-500":"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:t},t))}),e.jsx("button",{onClick:()=>m(r+1),disabled:r===i,className:"rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 transition hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})})]})]})]})};export{J as default};
